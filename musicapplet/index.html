<!DOCTYPE html>

<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=euc-kr">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" type="text/css" href="/musicapplet/style.css">
	<link rel="stylesheet" type="text/css" href="/musicapplet/abcjs_midi.css">
	
	<script src="https://code.jquery.com/jquery-2.1.0.min.js"></script>
	<script src="/musicapplet/abcjs_midi_5.6.2_min.js"></script>
</head>
<body>
	<div id="container">
		<div id="row"></div>
		<div id="numbercontainer">
			<div class="numberoutput" id="output0">x</div>
			<div class="numberoutput" id="output1">x</div>
			<div class="numberoutput" id="output2">x</div>
			<div class="numberoutput" id="output3">x</div>
			<div class="numberoutput" id="output4">x</div>
			<div class="numberoutput" id="output5">x</div>
			<div class="numberoutput" id="output6">x</div>
			<div class="numberoutput" id="output7">x</div>
			<div class="numberoutput" id="output8">x</div>
			<div class="numberoutput" id="output9">x</div>
			<div class="numberoutput" id="output10">x</div>
			<div class="numberoutput" id="output11">x</div>
		</div>
		<button id="button" onclick="printNumbers()">Run</button>
		<div class="abcjs-large" id="midi"></div>
	</div>
</body>
<script>
	var numbers = [
		{number:1, tone:"E"},
		{number:2, tone:"F"},
		{number:3, tone:"^F"},
		{number:4, tone:"G"},
		{number:5, tone:"^G"},
		{number:6, tone:"A"},
		{number:7, tone:"^A"},
		{number:8, tone:"B"},
		{number:9, tone:"c"},
		{number:10, tone:"^c"},
		{number:11, tone:"d"},
		{number:12, tone:"^d"}
	];

	var n;
	function Shuffle(o) {
		for(var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
		return o;
	};

	function renderMidi() {
		abcjs.renderMidi(
		midi,
		notes,
		{
			qpm: 120,
			inlineControls: {
				tempo: true,
			},
		});

	abcjs.midi.startPlaying(document.querySelector(".abcjs-inline-midi"));

	abcjs.midi.stopPlaying();

	abcjs.midi.restartPlaying();

	abcjs.midi.setLoop(document.querySelector(".abcjs-inline-midi"), true);


	//abcjs.midi.setSoundFont("");
	}
	
	function printNumbers() {
		shuffledNumbers = Shuffle(numbers);
		shuffledVoices = shuffledNumbers.map(a => a.tone);
		for (n = 0; n < numbers.length; n++) {
			var elementId = "output" + n;
			document.getElementById(elementId).innerHTML = shuffledNumbers[n].number;
		}

		var row = document.getElementById("row");
		var notes = 'X: 1\nL: 1/4\n' + shuffledVoices[0] + shuffledVoices[1] + shuffledVoices[2] + shuffledVoices[3] + shuffledVoices[4] + shuffledVoices[5] + shuffledVoices[6] + shuffledVoices[7] + shuffledVoices[8] + shuffledVoices[9] + shuffledVoices[10] + shuffledVoices[11];
		
		tuneObjectArray = ABCJS.renderAbc(
		row,
		notes,
		{
			staffwidth: 590,
			paddingtop: 0,
			paddingbottom: 0,
			paddingright: 5,
			paddingleft: 5,
		});
		renderMidi();
	}


</script>